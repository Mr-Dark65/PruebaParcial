FROM node:18-alpine
WORKDIR /usr/src/app

# Instalaci贸n de dependencias con cache optimizada
COPY package*.json ./
RUN npm install --production && \
    npm cache clean --force

# Copiar configuraci贸n y c贸digo del servicio
COPY config ./config
COPY api-gateway/ .  

# Saludable defaults para producci贸n
USER node
EXPOSE 3000
CMD ["node", "server.js"]
